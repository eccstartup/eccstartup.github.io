# ffmpeg一应用

最近上课的时候，录制了音频wav。但是想传到B站上的时候，需要视频格式才好，音频被认为是视频的音轨或者是上传的单曲，我觉得不合适，那就想办法把音频转成视频吧。



本文技术含量低，手工操作成分高，由于需求量不大，没有搞成自动化，但是不排除自动化的可能。

### 材料准备

* 录制好的wav文件
* 视频封面图片
* 格式工厂（捂脸）
* ffmpeg.exe, 在网上下载一份build即可，解压出来

### 操作步骤

1. 用格式工厂把wav剪辑

   由于录制好的视频有一部分是课间休息的声音，我需要把这部分删掉，所以先要截取其中的几段音频，转成mp3即可。

2. 用格式工厂把几段音频合并

   这里还是要格式工厂，合并几个mp3，成最终版mp3

3. 用ffmpeg把音频和图片混合成mp4视频

   最后一步了，我们把解压好的ffmpeg.exe拿出来，进行合并。一个命令即可

   ```bash
   ffmpeg-n4.3.2-162-g4bbcaf7559-win64-gpl-4.3\bin\ffmpeg.exe -r 10 -f image2 -loop 1 -i cover.png -i 统计调查与数据采集4.mp3 -s 1920x1080 -pix_fmt yuvj420p -t 7316 -vcodec libx264 -c:a copy output.mp4
   ```

​    此处，我们需要设置的几个参数是

* cover.png：图片路径，为了整个时段显示

* 统计调查与数据采集4.mp3：第2步得到的音轨

* -t 7316：这个是音轨的长度，精确到秒

* output.mp4：输出文件

至此就大功告成了！

### 输出结果

目前来看，混合的过程是6倍速的，即2小时的音频，需要20分钟来混合，得到80MB的mp4，感觉尚可。

调整清晰度的话可能会有所偏差，大体如此。
